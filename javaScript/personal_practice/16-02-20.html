<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }
        
        .kelin_tip {
            position: fixed;
            top: 0;
            left: 0;
            background: #000000;
            color: #ffffff;
            padding: 10px;
            line-height: 32px;
            border-radius: 30%;
        }
        
        .main {
            height: 100px;
            width: 800px;
            margin: 20px auto;
            background-color: #444444;
            padding: 50px;
        }
        
        div .box {
            margin-right: 50px;
            position: relative;
            float: left;
            height: 100px;
            width: 100px;
            background-color: wheat;
            overflow: hidden;
        }
        
        .box .supBox {
         
            visibility: hidden;
            position: absolute;
            
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            background-color: rgba(0, 255, 0, 0.6);
        }
    </style>
</head>

<body>
    <div class="kelin_tip"> <span>javscript</span>
        <br><span>动画效果</span> </div>
    <div class="main">
        <div class="demo">

            <div class="box">
                底部
                <div class="supBox"></div>
            </div>


            <div class="box">
                <div class="supBox"></div>
            </div>

        </div>
    </div>
    <script>
        
        var tools;
        
        (function(){
            console.log("hi");
            tools={
                    // top : x>0 y<=0
                    // right:x>0 y>0   && x>y
                    // bottom:x>0 y>0  && x<y
                    // left: x<=0 y>0
                getDrection(x,y){
                     if(x>0&&y <=0){
                        return "top";
                    }else if(x>0&&y>0){
                        if(x>y){
                            return  "right";
                        }
                        
                        return "bottom";
                    }else if(x <=0&& y >0){
                         return "left";
                    }
                }
            }
        })();
        
        window.onload=function(){
            var box = document.getElementsByClassName("box");
            for(var i=0,len=box.length;i<len;i++){
                box[i].onmouseenter=function(event){
                     var dre = tools.getDrection(event.offsetX,event.offsetY);
                     console.log(dre);
                     var supBox = event.currentTarget.getElementsByClassName("supBox")[0];
                     var mH = getComputedStyle(event.currentTarget)["height"];
                     var mW = getComputedStyle(event.currentTarget)["width"];
                     if(dre=="top"){
                         supBox.style[dre]="-"+mH;
                         supBox.style["visibility"]="visible";
                     }else if(dre=="right"){
                          supBox.style["left"]=""+mW;
                          supBox.style["visibility"]="visible";
                     }else if(dre=="bottom"){
                           supBox.style["top"]=""+mH;
                           supBox.style["visibility"]="visible";
                     }else if(dre=="left"){
                           supBox.style[dre]="-"+mW;
                           supBox.style["visibility"]="visible";
                           MoveLeft(supBox,0);
                           
                     }
                    
                }
                box[i].onmouseleave=function(event){
                     console.log(tools.getDrection(event.offsetX,event.offsetY));
                }
            }
        }
        
        function MoveLeft(targetEle,target){
            clearTimeout(targetEle.timer);
            
                targetEle.timer = setTimeout(function(){
                       var mL =parseInt(getComputedStyle(targetEle)["left"],10);
                       if(mL!=target){
                            var speed = (target -mL)/5;
                            speed = speed>0?Math.ceil(speed):Math.floor(speed);
                            targetEle.style["left"] =mL+speed+"px";
                           MoveLeft(targetEle,target);
                         }
                },40);
                
            
        }
    </script>
</body>

</html>